{"kind":"ResourceBundleState","apiVersion":"k8splugin.io/v1alpha1","metadata":{"name":"2769686156212287116-kube-prometheus-stack","namespace":"default","uid":"c09b51ba-99c4-4182-9186-ac87e84db205","resourceVersion":"8328046","generation":1,"creationTimestamp":"2022-04-12T15:50:54Z","labels":{"emco/deployment-id":"2769686156212287116-kube-prometheus-stack","kustomize.toolkit.fluxcd.io/name":"kcust2769686156212287116","kustomize.toolkit.fluxcd.io/namespace":"default"},"managedFields":[{"manager":"kustomize-controller","operation":"Apply","apiVersion":"k8splugin.io/v1alpha1","time":"2022-04-12T15:50:54Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:emco/deployment-id":{},"f:kustomize.toolkit.fluxcd.io/name":{},"f:kustomize.toolkit.fluxcd.io/namespace":{}}},"f:spec":{"f:selector":{"f:matchLabels":{"f:emco/deployment-id":{}}}}}},{"manager":"monitor","operation":"Update","apiVersion":"k8splugin.io/v1alpha1","time":"2022-04-12T15:50:54Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:jobStatuses":{},"f:podStatuses":{},"f:ready":{},"f:resourceCount":{},"f:resourceStatuses":{}}},"subresource":"status"}]},"spec":{"selector":{"matchLabels":{"emco/deployment-id":"2769686156212287116-kube-prometheus-stack"}}},"status":{"ready":false,"resourceCount":0,"podStatuses":[{"kind":"Pod","apiVersion":"v1","metadata":{"name":"r1-prometheus-node-exporter-284c6","creationTimestamp":null},"spec":{"volumes":[{"name":"proc","hostPath":{"path":"/proc","type":""}},{"name":"sys","hostPath":{"path":"/sys","type":""}},{"name":"root","hostPath":{"path":"/","type":""}}],"containers":[{"name":"node-exporter","image":"quay.io/prometheus/node-exporter:v1.2.2","args":["--path.procfs=/host/proc","--path.sysfs=/host/sys","--path.rootfs=/host/root","--web.listen-address=$(HOST_IP):9100","--collector.filesystem.ignored-mount-points=^/(dev|proc|sys|var/lib/docker/.+|var/lib/kubelet/.+)($|/)","--collector.filesystem.ignored-fs-types=^(autofs|binfmt_misc|bpf|cgroup2?|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|iso9660|mqueue|nsfs|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|selinuxfs|squashfs|sysfs|tracefs)$"],"ports":[{"name":"http-metrics","hostPort":9100,"containerPort":9100,"protocol":"TCP"}],"env":[{"name":"HOST_IP","value":"0.0.0.0"}],"resources":{},"volumeMounts":[{"name":"proc","readOnly":true,"mountPath":"/host/proc"},{"name":"sys","readOnly":true,"mountPath":"/host/sys"},{"name":"root","readOnly":true,"mountPath":"/host/root","mountPropagation":"HostToContainer"}],"livenessProbe":{"httpGet":{"path":"/","port":9100,"scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/","port":9100,"scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-prometheus-node-exporter","serviceAccount":"r1-prometheus-node-exporter","automountServiceAccountToken":false,"nodeName":"master-node","hostNetwork":true,"hostPID":true,"securityContext":{"runAsUser":65534,"runAsGroup":65534,"runAsNonRoot":true,"fsGroup":65534},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchFields":[{"key":"metadata.name","operator":"In","values":["master-node"]}]}]}}},"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/disk-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/pid-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/unschedulable","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/network-unavailable","operator":"Exists","effect":"NoSchedule"}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Pending","conditions":[{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2022-04-12T15:50:54Z"}],"qosClass":"BestEffort"}},{"kind":"Pod","apiVersion":"v1","metadata":{"name":"r1-grafana-85c7996867-56dk4","creationTimestamp":null},"spec":{"volumes":[{"name":"config","configMap":{"name":"r1-grafana","defaultMode":420}},{"name":"storage","emptyDir":{}},{"name":"sc-dashboard-volume","emptyDir":{}},{"name":"sc-dashboard-provider","configMap":{"name":"r1-grafana-config-dashboards","defaultMode":420}},{"name":"sc-datasources-volume","emptyDir":{}},{"name":"kube-api-access-mgf7w","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"grafana-sc-dashboard","image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","env":[{"name":"METHOD","value":"WATCH"},{"name":"LABEL","value":"grafana_dashboard"},{"name":"FOLDER","value":"/tmp/dashboards"},{"name":"RESOURCE","value":"both"}],"resources":{},"volumeMounts":[{"name":"sc-dashboard-volume","mountPath":"/tmp/dashboards"},{"name":"kube-api-access-mgf7w","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"grafana-sc-datasources","image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","env":[{"name":"METHOD","value":"WATCH"},{"name":"LABEL","value":"grafana_datasource"},{"name":"FOLDER","value":"/etc/grafana/provisioning/datasources"},{"name":"RESOURCE","value":"both"},{"name":"REQ_USERNAME","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-user"}}},{"name":"REQ_PASSWORD","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-password"}}},{"name":"REQ_URL","value":"http://localhost:3000/api/admin/provisioning/datasources/reload"},{"name":"REQ_METHOD","value":"POST"}],"resources":{},"volumeMounts":[{"name":"sc-datasources-volume","mountPath":"/etc/grafana/provisioning/datasources"},{"name":"kube-api-access-mgf7w","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"grafana","image":"grafana/grafana:8.3.1","ports":[{"name":"http-web","containerPort":80,"protocol":"TCP"},{"name":"grafana","containerPort":3000,"protocol":"TCP"}],"env":[{"name":"GF_SECURITY_ADMIN_USER","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-user"}}},{"name":"GF_SECURITY_ADMIN_PASSWORD","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-password"}}},{"name":"GF_PATHS_DATA","value":"/var/lib/grafana/"},{"name":"GF_PATHS_LOGS","value":"/var/log/grafana"},{"name":"GF_PATHS_PLUGINS","value":"/var/lib/grafana/plugins"},{"name":"GF_PATHS_PROVISIONING","value":"/etc/grafana/provisioning"}],"resources":{},"volumeMounts":[{"name":"config","mountPath":"/etc/grafana/grafana.ini","subPath":"grafana.ini"},{"name":"storage","mountPath":"/var/lib/grafana"},{"name":"sc-dashboard-volume","mountPath":"/tmp/dashboards"},{"name":"sc-dashboard-provider","mountPath":"/etc/grafana/provisioning/dashboards/sc-dashboardproviders.yaml","subPath":"provider.yaml"},{"name":"sc-datasources-volume","mountPath":"/etc/grafana/provisioning/datasources"},{"name":"kube-api-access-mgf7w","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/api/health","port":3000,"scheme":"HTTP"},"initialDelaySeconds":60,"timeoutSeconds":30,"periodSeconds":10,"successThreshold":1,"failureThreshold":10},"readinessProbe":{"httpGet":{"path":"/api/health","port":3000,"scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-grafana","serviceAccount":"r1-grafana","automountServiceAccountToken":true,"nodeName":"master-node","securityContext":{"runAsUser":472,"runAsGroup":472,"fsGroup":472},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2022-04-12T15:50:54Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2022-04-12T15:50:54Z","reason":"ContainersNotReady","message":"containers with unready status: [grafana-sc-dashboard grafana-sc-datasources grafana]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2022-04-12T15:50:54Z","reason":"ContainersNotReady","message":"containers with unready status: [grafana-sc-dashboard grafana-sc-datasources grafana]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2022-04-12T15:50:54Z"}],"hostIP":"10.0.2.15","startTime":"2022-04-12T15:50:54Z","containerStatuses":[{"name":"grafana","state":{"waiting":{"reason":"ContainerCreating"}},"lastState":{},"ready":false,"restartCount":0,"image":"grafana/grafana:8.3.1","imageID":"","started":false},{"name":"grafana-sc-dashboard","state":{"waiting":{"reason":"ContainerCreating"}},"lastState":{},"ready":false,"restartCount":0,"image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","imageID":"","started":false},{"name":"grafana-sc-datasources","state":{"waiting":{"reason":"ContainerCreating"}},"lastState":{},"ready":false,"restartCount":0,"image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","imageID":"","started":false}],"qosClass":"BestEffort"}}],"jobStatuses":[{"kind":"Job","apiVersion":"batch/v1","metadata":{"name":"r1-kube-prometheus-stack-admission-patch","namespace":"default","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-admission-patch","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","emco/deployment-id":"2769686156212287116-kube-prometheus-stack","heritage":"Helm","kustomize.toolkit.fluxcd.io/name":"kcust2769686156212287116","kustomize.toolkit.fluxcd.io/namespace":"default","release":"r1"},"annotations":{"batch.kubernetes.io/job-tracking":"","helm.sh/hook":"post-install,post-upgrade","helm.sh/hook-delete-policy":"before-hook-creation,hook-succeeded"}},"spec":{"parallelism":1,"completions":1,"backoffLimit":6,"selector":{"matchLabels":{"controller-uid":"917d5936-92e3-4b82-806c-36790ec4499e"}},"template":{"metadata":{"name":"r1-kube-prometheus-stack-admission-patch","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-admission-patch","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","controller-uid":"917d5936-92e3-4b82-806c-36790ec4499e","emco/deployment-id":"2769686156212287116-kube-prometheus-stack","heritage":"Helm","job-name":"r1-kube-prometheus-stack-admission-patch","release":"r1"}},"spec":{"containers":[{"name":"patch","image":"k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.0@sha256:f3b6b39a6062328c095337b4cadcefd1612348fdd5190b1dcbcb9b9e90bd8068","args":["patch","--webhook-name=r1-kube-prometheus-stack-admission","--namespace=default","--secret-name=r1-kube-prometheus-stack-admission","--patch-failure-policy=Fail"],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"OnFailure","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-kube-prometheus-stack-admission","serviceAccount":"r1-kube-prometheus-stack-admission","securityContext":{"runAsUser":2000,"runAsGroup":2000,"runAsNonRoot":true},"schedulerName":"default-scheduler"}},"completionMode":"NonIndexed","suspend":false},"status":{"startTime":"2022-04-12T15:50:54Z","active":1,"uncountedTerminatedPods":{}}},{"kind":"Job","apiVersion":"batch/v1","metadata":{"name":"r1-kube-prometheus-stack-admission-create","namespace":"default","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-admission-create","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","emco/deployment-id":"2769686156212287116-kube-prometheus-stack","heritage":"Helm","kustomize.toolkit.fluxcd.io/name":"kcust2769686156212287116","kustomize.toolkit.fluxcd.io/namespace":"default","release":"r1"},"annotations":{"batch.kubernetes.io/job-tracking":"","helm.sh/hook":"pre-install,pre-upgrade","helm.sh/hook-delete-policy":"before-hook-creation,hook-succeeded"}},"spec":{"parallelism":1,"completions":1,"backoffLimit":6,"selector":{"matchLabels":{"controller-uid":"910ce25a-2b23-4c0a-8e28-2cd0696d98b2"}},"template":{"metadata":{"name":"r1-kube-prometheus-stack-admission-create","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-admission-create","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","controller-uid":"910ce25a-2b23-4c0a-8e28-2cd0696d98b2","emco/deployment-id":"2769686156212287116-kube-prometheus-stack","heritage":"Helm","job-name":"r1-kube-prometheus-stack-admission-create","release":"r1"}},"spec":{"containers":[{"name":"create","image":"k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.0@sha256:f3b6b39a6062328c095337b4cadcefd1612348fdd5190b1dcbcb9b9e90bd8068","args":["create","--host=r1-kube-prometheus-stack-operator,r1-kube-prometheus-stack-operator.default.svc","--namespace=default","--secret-name=r1-kube-prometheus-stack-admission"],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"OnFailure","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-kube-prometheus-stack-admission","serviceAccount":"r1-kube-prometheus-stack-admission","securityContext":{"runAsUser":2000,"runAsGroup":2000,"runAsNonRoot":true},"schedulerName":"default-scheduler"}},"completionMode":"NonIndexed","suspend":false},"status":{"startTime":"2022-04-12T15:50:54Z","active":1,"uncountedTerminatedPods":{}}}],"resourceStatuses":[{"group":"rbac.authorization.k8s.io","version":"v1","kind":"ClusterRoleBinding","name":"psp-r1-prometheus-node-exporter","res":"eyJhcGlWZXJzaW9uIjoicmJhYy5hdXRob3JpemF0aW9uLms4cy5pby92MSIsImtpbmQiOiJDbHVzdGVyUm9sZUJpbmRpbmciLCJtZXRhZGF0YSI6eyJjcmVhdGlvblRpbWVzdGFtcCI6IjIwMjItMDQtMTFUMjE6MDI6MzlaIiwibGFiZWxzIjp7ImFwcCI6InByb21ldGhldXMtbm9kZS1leHBvcnRlciIsImNoYXJ0IjoicHJvbWV0aGV1cy1ub2RlLWV4cG9ydGVyLTIuMi4yIiwiZW1jby9kZXBsb3ltZW50LWlkIjoiMjc2OTY4NjE1NjIxMjI4NzExNi1rdWJlLXByb21ldGhldXMtc3RhY2siLCJoZXJpdGFnZSI6IkhlbG0iLCJqb2JMYWJlbCI6Im5vZGUtZXhwb3J0ZXIiLCJrdXN0b21pemUudG9vbGtpdC5mbHV4Y2QuaW8vbmFtZSI6ImtjdXN0Mjc2OTY4NjE1NjIxMjI4NzExNiIsImt1c3RvbWl6ZS50b29sa2l0LmZsdXhjZC5pby9uYW1lc3BhY2UiOiJkZWZhdWx0IiwicmVsZWFzZSI6InIxIn0sIm1hbmFnZWRGaWVsZHMiOltdLCJuYW1lIjoicHNwLXIxLXByb21ldGhldXMtbm9kZS1leHBvcnRlciIsInJlc291cmNlVmVyc2lvbiI6IjgxMjYzOTAiLCJ1aWQiOiIyOGQwMWY5OC1jMjE1LTRlM2ItOTZjOC0wYmJjZjFjODVjMTAifSwicm9sZVJlZiI6eyJhcGlHcm91cCI6InJiYWMuYXV0aG9yaXphdGlvbi5rOHMuaW8iLCJraW5kIjoiQ2x1c3RlclJvbGUiLCJuYW1lIjoicHNwLXIxLXByb21ldGhldXMtbm9kZS1leHBvcnRlciJ9LCJzdWJqZWN0cyI6W3sia2luZCI6IlNlcnZpY2VBY2NvdW50IiwibmFtZSI6InIxLXByb21ldGhldXMtbm9kZS1leHBvcnRlciIsIm5hbWVzcGFjZSI6ImRlZmF1bHQifV19"}]}}