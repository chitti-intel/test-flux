{"kind":"ResourceBundleState","apiVersion":"k8splugin.io/v1alpha1","metadata":{"name":"2769686156212287116-kube-prometheus-stack","namespace":"default","uid":"84662ec5-eb9a-4bb4-882c-94019f9e6b1e","resourceVersion":"8124866","generation":1,"creationTimestamp":"2022-04-11T21:02:41Z","labels":{"emco/deployment-id":"2769686156212287116-kube-prometheus-stack","kustomize.toolkit.fluxcd.io/name":"flux-system","kustomize.toolkit.fluxcd.io/namespace":"flux-system"},"managedFields":[{"manager":"kustomize-controller","operation":"Apply","apiVersion":"k8splugin.io/v1alpha1","time":"2022-04-11T21:02:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:emco/deployment-id":{},"f:kustomize.toolkit.fluxcd.io/name":{},"f:kustomize.toolkit.fluxcd.io/namespace":{}}},"f:spec":{"f:selector":{"f:matchLabels":{"f:emco/deployment-id":{}}}}}},{"manager":"monitor","operation":"Update","apiVersion":"k8splugin.io/v1alpha1","time":"2022-04-11T21:02:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:deploymentStatuses":{},"f:podStatuses":{},"f:ready":{},"f:resourceCount":{},"f:resourceStatuses":{}}},"subresource":"status"}]},"spec":{"selector":{"matchLabels":{"emco/deployment-id":"2769686156212287116-kube-prometheus-stack"}}},"status":{"ready":false,"resourceCount":0,"podStatuses":[{"kind":"Pod","apiVersion":"v1","metadata":{"name":"r1-kube-state-metrics-698544f764-lscqz","creationTimestamp":null},"spec":{"volumes":[{"name":"kube-api-access-dqfqj","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"kube-state-metrics","image":"k8s.gcr.io/kube-state-metrics/kube-state-metrics:v2.2.4","args":["--port=8080","--resources=certificatesigningrequests,configmaps,cronjobs,daemonsets,deployments,endpoints,horizontalpodautoscalers,ingresses,jobs,limitranges,mutatingwebhookconfigurations,namespaces,networkpolicies,nodes,persistentvolumeclaims,persistentvolumes,poddisruptionbudgets,pods,replicasets,replicationcontrollers,resourcequotas,secrets,services,statefulsets,storageclasses,validatingwebhookconfigurations,volumeattachments","--telemetry-port=8081"],"ports":[{"name":"http","containerPort":8080,"protocol":"TCP"}],"resources":{},"volumeMounts":[{"name":"kube-api-access-dqfqj","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":8080,"scheme":"HTTP"},"initialDelaySeconds":5,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/","port":8080,"scheme":"HTTP"},"initialDelaySeconds":5,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-kube-state-metrics","serviceAccount":"r1-kube-state-metrics","nodeName":"master-node","securityContext":{"runAsUser":65534,"runAsGroup":65534,"fsGroup":65534},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2022-04-11T21:02:41Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2022-04-11T21:02:41Z","reason":"ContainersNotReady","message":"containers with unready status: [kube-state-metrics]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2022-04-11T21:02:41Z","reason":"ContainersNotReady","message":"containers with unready status: [kube-state-metrics]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2022-04-11T21:02:41Z"}],"hostIP":"10.0.2.15","startTime":"2022-04-11T21:02:41Z","containerStatuses":[{"name":"kube-state-metrics","state":{"waiting":{"reason":"ContainerCreating"}},"lastState":{},"ready":false,"restartCount":0,"image":"k8s.gcr.io/kube-state-metrics/kube-state-metrics:v2.2.4","imageID":"","started":false}],"qosClass":"BestEffort"}},{"kind":"Pod","apiVersion":"v1","metadata":{"name":"r1-grafana-85c7996867-bvskh","creationTimestamp":null},"spec":{"volumes":[{"name":"config","configMap":{"name":"r1-grafana","defaultMode":420}},{"name":"storage","emptyDir":{}},{"name":"sc-dashboard-volume","emptyDir":{}},{"name":"sc-dashboard-provider","configMap":{"name":"r1-grafana-config-dashboards","defaultMode":420}},{"name":"sc-datasources-volume","emptyDir":{}},{"name":"kube-api-access-hlhsn","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"grafana-sc-dashboard","image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","env":[{"name":"METHOD","value":"WATCH"},{"name":"LABEL","value":"grafana_dashboard"},{"name":"FOLDER","value":"/tmp/dashboards"},{"name":"RESOURCE","value":"both"}],"resources":{},"volumeMounts":[{"name":"sc-dashboard-volume","mountPath":"/tmp/dashboards"},{"name":"kube-api-access-hlhsn","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"grafana-sc-datasources","image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","env":[{"name":"METHOD","value":"WATCH"},{"name":"LABEL","value":"grafana_datasource"},{"name":"FOLDER","value":"/etc/grafana/provisioning/datasources"},{"name":"RESOURCE","value":"both"},{"name":"REQ_USERNAME","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-user"}}},{"name":"REQ_PASSWORD","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-password"}}},{"name":"REQ_URL","value":"http://localhost:3000/api/admin/provisioning/datasources/reload"},{"name":"REQ_METHOD","value":"POST"}],"resources":{},"volumeMounts":[{"name":"sc-datasources-volume","mountPath":"/etc/grafana/provisioning/datasources"},{"name":"kube-api-access-hlhsn","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"grafana","image":"grafana/grafana:8.3.1","ports":[{"name":"http-web","containerPort":80,"protocol":"TCP"},{"name":"grafana","containerPort":3000,"protocol":"TCP"}],"env":[{"name":"GF_SECURITY_ADMIN_USER","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-user"}}},{"name":"GF_SECURITY_ADMIN_PASSWORD","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-password"}}},{"name":"GF_PATHS_DATA","value":"/var/lib/grafana/"},{"name":"GF_PATHS_LOGS","value":"/var/log/grafana"},{"name":"GF_PATHS_PLUGINS","value":"/var/lib/grafana/plugins"},{"name":"GF_PATHS_PROVISIONING","value":"/etc/grafana/provisioning"}],"resources":{},"volumeMounts":[{"name":"config","mountPath":"/etc/grafana/grafana.ini","subPath":"grafana.ini"},{"name":"storage","mountPath":"/var/lib/grafana"},{"name":"sc-dashboard-volume","mountPath":"/tmp/dashboards"},{"name":"sc-dashboard-provider","mountPath":"/etc/grafana/provisioning/dashboards/sc-dashboardproviders.yaml","subPath":"provider.yaml"},{"name":"sc-datasources-volume","mountPath":"/etc/grafana/provisioning/datasources"},{"name":"kube-api-access-hlhsn","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/api/health","port":3000,"scheme":"HTTP"},"initialDelaySeconds":60,"timeoutSeconds":30,"periodSeconds":10,"successThreshold":1,"failureThreshold":10},"readinessProbe":{"httpGet":{"path":"/api/health","port":3000,"scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-grafana","serviceAccount":"r1-grafana","automountServiceAccountToken":true,"nodeName":"master-node","securityContext":{"runAsUser":472,"runAsGroup":472,"fsGroup":472},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2022-04-11T21:02:41Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2022-04-11T21:02:41Z","reason":"ContainersNotReady","message":"containers with unready status: [grafana-sc-dashboard grafana-sc-datasources grafana]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2022-04-11T21:02:41Z","reason":"ContainersNotReady","message":"containers with unready status: [grafana-sc-dashboard grafana-sc-datasources grafana]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2022-04-11T21:02:41Z"}],"hostIP":"10.0.2.15","startTime":"2022-04-11T21:02:41Z","containerStatuses":[{"name":"grafana","state":{"waiting":{"reason":"ContainerCreating"}},"lastState":{},"ready":false,"restartCount":0,"image":"grafana/grafana:8.3.1","imageID":"","started":false},{"name":"grafana-sc-dashboard","state":{"waiting":{"reason":"ContainerCreating"}},"lastState":{},"ready":false,"restartCount":0,"image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","imageID":"","started":false},{"name":"grafana-sc-datasources","state":{"waiting":{"reason":"ContainerCreating"}},"lastState":{},"ready":false,"restartCount":0,"image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","imageID":"","started":false}],"qosClass":"BestEffort"}}],"deploymentStatuses":[{"kind":"Deployment","apiVersion":"apps/v1","metadata":{"name":"r1-grafana","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"grafana","app.kubernetes.io/version":"8.3.1","emco/deployment-id":"2769686156212287116-kube-prometheus-stack","helm.sh/chart":"grafana-6.19.0","kustomize.toolkit.fluxcd.io/name":"flux-system","kustomize.toolkit.fluxcd.io/namespace":"flux-system"},"annotations":{"deployment.kubernetes.io/revision":"1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/instance":"r1","app.kubernetes.io/name":"grafana"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/instance":"r1","app.kubernetes.io/name":"grafana","emco/deployment-id":"2769686156212287116-kube-prometheus-stack"},"annotations":{"checksum/config":"8471fda5bf3a526f6670f0bb348ef2cba594ea4bc0e1ecd3c4c381392cfe591e","checksum/dashboards-json-config":"01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b","checksum/sc-dashboard-provider-config":"5777f64217852562929c11035caa2dfcdd2471d42351f05b1267f1d0d8ba9ceb","checksum/secret":"548b20681863a586e39572875aa81266164cf38df594bddd837aa56b160af0d8"}},"spec":{"volumes":[{"name":"config","configMap":{"name":"r1-grafana","defaultMode":420}},{"name":"storage","emptyDir":{}},{"name":"sc-dashboard-volume","emptyDir":{}},{"name":"sc-dashboard-provider","configMap":{"name":"r1-grafana-config-dashboards","defaultMode":420}},{"name":"sc-datasources-volume","emptyDir":{}}],"containers":[{"name":"grafana-sc-dashboard","image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","env":[{"name":"METHOD","value":"WATCH"},{"name":"LABEL","value":"grafana_dashboard"},{"name":"FOLDER","value":"/tmp/dashboards"},{"name":"RESOURCE","value":"both"}],"resources":{},"volumeMounts":[{"name":"sc-dashboard-volume","mountPath":"/tmp/dashboards"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"grafana-sc-datasources","image":"quay.io/kiwigrid/k8s-sidecar:1.14.2","env":[{"name":"METHOD","value":"WATCH"},{"name":"LABEL","value":"grafana_datasource"},{"name":"FOLDER","value":"/etc/grafana/provisioning/datasources"},{"name":"RESOURCE","value":"both"},{"name":"REQ_USERNAME","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-user"}}},{"name":"REQ_PASSWORD","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-password"}}},{"name":"REQ_URL","value":"http://localhost:3000/api/admin/provisioning/datasources/reload"},{"name":"REQ_METHOD","value":"POST"}],"resources":{},"volumeMounts":[{"name":"sc-datasources-volume","mountPath":"/etc/grafana/provisioning/datasources"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"grafana","image":"grafana/grafana:8.3.1","ports":[{"name":"http-web","containerPort":80,"protocol":"TCP"},{"name":"grafana","containerPort":3000,"protocol":"TCP"}],"env":[{"name":"GF_SECURITY_ADMIN_USER","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-user"}}},{"name":"GF_SECURITY_ADMIN_PASSWORD","valueFrom":{"secretKeyRef":{"name":"r1-grafana","key":"admin-password"}}},{"name":"GF_PATHS_DATA","value":"/var/lib/grafana/"},{"name":"GF_PATHS_LOGS","value":"/var/log/grafana"},{"name":"GF_PATHS_PLUGINS","value":"/var/lib/grafana/plugins"},{"name":"GF_PATHS_PROVISIONING","value":"/etc/grafana/provisioning"}],"resources":{},"volumeMounts":[{"name":"config","mountPath":"/etc/grafana/grafana.ini","subPath":"grafana.ini"},{"name":"storage","mountPath":"/var/lib/grafana"},{"name":"sc-dashboard-volume","mountPath":"/tmp/dashboards"},{"name":"sc-dashboard-provider","mountPath":"/etc/grafana/provisioning/dashboards/sc-dashboardproviders.yaml","subPath":"provider.yaml"},{"name":"sc-datasources-volume","mountPath":"/etc/grafana/provisioning/datasources"}],"livenessProbe":{"httpGet":{"path":"/api/health","port":3000,"scheme":"HTTP"},"initialDelaySeconds":60,"timeoutSeconds":30,"periodSeconds":10,"successThreshold":1,"failureThreshold":10},"readinessProbe":{"httpGet":{"path":"/api/health","port":3000,"scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-grafana","serviceAccount":"r1-grafana","automountServiceAccountToken":true,"securityContext":{"runAsUser":472,"runAsGroup":472,"fsGroup":472},"schedulerName":"default-scheduler","enableServiceLinks":true}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"unavailableReplicas":1,"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2022-04-11T21:02:41Z","lastTransitionTime":"2022-04-11T21:02:41Z","reason":"MinimumReplicasUnavailable","message":"Deployment does not have minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2022-04-11T21:02:41Z","lastTransitionTime":"2022-04-11T21:02:41Z","reason":"ReplicaSetUpdated","message":"ReplicaSet \"r1-grafana-85c7996867\" is progressing."}]}}],"resourceStatuses":[{"group":"rbac.authorization.k8s.io","version":"v1","kind":"Role","name":"r1-grafana","namespace":"default","res":"eyJhcGlWZXJzaW9uIjoicmJhYy5hdXRob3JpemF0aW9uLms4cy5pby92MSIsImtpbmQiOiJSb2xlIiwibWV0YWRhdGEiOnsiY3JlYXRpb25UaW1lc3RhbXAiOiIyMDIyLTA0LTExVDIxOjAyOjM5WiIsImxhYmVscyI6eyJhcHAua3ViZXJuZXRlcy5pby9pbnN0YW5jZSI6InIxIiwiYXBwLmt1YmVybmV0ZXMuaW8vbWFuYWdlZC1ieSI6IkhlbG0iLCJhcHAua3ViZXJuZXRlcy5pby9uYW1lIjoiZ3JhZmFuYSIsImFwcC5rdWJlcm5ldGVzLmlvL3ZlcnNpb24iOiI4LjMuMSIsImVtY28vZGVwbG95bWVudC1pZCI6IjI3Njk2ODYxNTYyMTIyODcxMTYta3ViZS1wcm9tZXRoZXVzLXN0YWNrIiwiaGVsbS5zaC9jaGFydCI6ImdyYWZhbmEtNi4xOS4wIiwia3VzdG9taXplLnRvb2xraXQuZmx1eGNkLmlvL25hbWUiOiJmbHV4LXN5c3RlbSIsImt1c3RvbWl6ZS50b29sa2l0LmZsdXhjZC5pby9uYW1lc3BhY2UiOiJmbHV4LXN5c3RlbSJ9LCJtYW5hZ2VkRmllbGRzIjpbXSwibmFtZSI6InIxLWdyYWZhbmEiLCJuYW1lc3BhY2UiOiJkZWZhdWx0IiwicmVzb3VyY2VWZXJzaW9uIjoiODEyNDYzOSIsInVpZCI6ImZhZWRmNmUwLWU3NGYtNDQxNS05MzIwLTlhMTAwNTQ5NmM3YSJ9LCJydWxlcyI6W3siYXBpR3JvdXBzIjpbImV4dGVuc2lvbnMiXSwicmVzb3VyY2VOYW1lcyI6WyJyMS1ncmFmYW5hIl0sInJlc291cmNlcyI6WyJwb2RzZWN1cml0eXBvbGljaWVzIl0sInZlcmJzIjpbInVzZSJdfV19"},{"group":"rbac.authorization.k8s.io","version":"v1","kind":"Role","name":"r1-grafana-test","namespace":"default","res":"eyJhcGlWZXJzaW9uIjoicmJhYy5hdXRob3JpemF0aW9uLms4cy5pby92MSIsImtpbmQiOiJSb2xlIiwibWV0YWRhdGEiOnsiY3JlYXRpb25UaW1lc3RhbXAiOiIyMDIyLTA0LTExVDIxOjAyOjM5WiIsImxhYmVscyI6eyJhcHAua3ViZXJuZXRlcy5pby9pbnN0YW5jZSI6InIxIiwiYXBwLmt1YmVybmV0ZXMuaW8vbWFuYWdlZC1ieSI6IkhlbG0iLCJhcHAua3ViZXJuZXRlcy5pby9uYW1lIjoiZ3JhZmFuYSIsImFwcC5rdWJlcm5ldGVzLmlvL3ZlcnNpb24iOiI4LjMuMSIsImVtY28vZGVwbG95bWVudC1pZCI6IjI3Njk2ODYxNTYyMTIyODcxMTYta3ViZS1wcm9tZXRoZXVzLXN0YWNrIiwiaGVsbS5zaC9jaGFydCI6ImdyYWZhbmEtNi4xOS4wIiwia3VzdG9taXplLnRvb2xraXQuZmx1eGNkLmlvL25hbWUiOiJmbHV4LXN5c3RlbSIsImt1c3RvbWl6ZS50b29sa2l0LmZsdXhjZC5pby9uYW1lc3BhY2UiOiJmbHV4LXN5c3RlbSJ9LCJtYW5hZ2VkRmllbGRzIjpbXSwibmFtZSI6InIxLWdyYWZhbmEtdGVzdCIsIm5hbWVzcGFjZSI6ImRlZmF1bHQiLCJyZXNvdXJjZVZlcnNpb24iOiI4MTI0NjQwIiwidWlkIjoiZWNkNDU1NzItOTI4Yi00NDFkLWJmMTMtNmNkMWZiYWUzNDIwIn0sInJ1bGVzIjpbeyJhcGlHcm91cHMiOlsicG9saWN5Il0sInJlc291cmNlTmFtZXMiOlsicjEtZ3JhZmFuYS10ZXN0Il0sInJlc291cmNlcyI6WyJwb2RzZWN1cml0eXBvbGljaWVzIl0sInZlcmJzIjpbInVzZSJdfV19"}]}}